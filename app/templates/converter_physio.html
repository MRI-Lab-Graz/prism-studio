                <!-- Physio Panel -->
                <div class="tab-pane fade" id="physio-panel" role="tabpanel" aria-labelledby="physio-tab">
                    <div class="card border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="bg-warning bg-opacity-10 rounded-circle p-3 me-3">
                                    <i class="fas fa-heartbeat fa-2x text-warning"></i>
                                </div>
                                <div>
                                    <h5 class="mb-1">Physiological Data Conversion</h5>
                                    <p class="text-muted mb-0">Convert Varioport recordings (ECG, respiration) to PRISM format</p>
                                </div>
                            </div>

                            <!-- Sub-tabs removed - only batch conversion now -->
                            <div class="tab-content" id="physioSubTabContent">
                                <div class="tab-pane fade show active" id="physio-batch" role="tabpanel">
                                    <div class="alert alert-light border mb-3">
                                        <i class="fas fa-info-circle me-2 text-info"></i>
                                        <strong>File naming required:</strong> <code>sub-XXX_ses-YYY_task-ZZZ.raw</code> or <code>.vpd</code>
                                        <br><small class="text-muted">Example: <code>sub-003_ses-1_task-rest.raw</code> · Session is optional</small>
                                    </div>
                                    
                                    <!-- Device & Settings Info -->
                                    <div class="alert alert-info border mb-3">
                                        <div class="row g-3">
                                            <div class="col-md-4">
                                                <label class="form-label small fw-bold text-muted mb-2">Device Type</label>
                                                <select class="form-select form-select-sm" id="physioBatchDeviceType" disabled>
                                                    <option selected>Varioport (.raw / .vpd)</option>
                                                </select>
                                                <small class="d-block mt-2 text-muted"><i class="fas fa-lightbulb me-1"></i> Currently supports Varioport ECG/EDA devices</small>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small fw-bold text-muted mb-2">Base Sampling Rate</label>
                                                <div class="input-group input-group-sm">
                                                    <input type="number" class="form-control" id="physioBatchSamplingRate" placeholder="512" value="512" step="any">
                                                    <span class="input-group-text">Hz</span>
                                                </div>
                                                <small class="d-block mt-2 text-muted"><i class="fas fa-info-circle me-1"></i> Default: 512 Hz (effective: 256 Hz). Change only if your device uses different rate.</small>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small fw-bold text-muted mb-2">Expected Channels</label>
                                                <div class="small text-muted">
                                                    <div>✓ EKG (cardiac)</div>
                                                    <div>✓ EDA (skin conductance)</div>
                                                    <div>✓ Marker (events)</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row g-3 align-items-end">
                                        <div class="col-md-6">
                                            <label for="physioBatchFiles" class="form-label fw-bold">Select Physio Files</label>
                                            <div class="input-group">
                                                <input class="form-control" type="file" id="physioBatchFiles" accept=".raw,.vpd" multiple>
                                                <button class="btn btn-outline-secondary d-none" type="button" id="clearPhysioBatchFilesBtn" aria-label="Clear selected physio files" title="Clear selection">
                                                    <i class="fas fa-times"></i>
                                                </button>
                                            </div>
                                            <small class="text-muted">Select individual files</small>
                                        </div>
                                        <div class="col-md-6">
                                            <div>
                                                <label for="physioBatchFolder" class="form-label fw-bold">Or Select a Folder</label>
                                                <div class="input-group">
                                                    <input class="form-control" type="file" id="physioBatchFolder" webkitdirectory directory multiple>
                                                    <button class="btn btn-outline-secondary d-none" type="button" id="clearPhysioBatchFolderBtn" aria-label="Clear selected physio folder" title="Clear selection">
                                                        <i class="fas fa-times"></i>
                                                    </button>
                                                    <button class="btn btn-outline-primary" type="button" id="autoDetectPhysioBtn" title="Auto-detect sourcedata/physio folder">
                                                        <i class="fas fa-folder-open me-2"></i>Auto-detect
                                                    </button>
                                                </div>
                                                <small class="text-muted">Select sourcedata/physio/ folder to convert all files at once</small>
                                                <small class="d-block text-muted mt-1" id="autoDetectHint"></small>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Hidden field for auto-detected folder path -->
                                    <input type="hidden" id="physioBatchFolderPath">
                                    <div class="row g-3 mt-2 align-items-center">
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="physioBatchDryRun">
                                                <label class="form-check-label" for="physioBatchDryRun">
                                                    <i class="fas fa-flask me-2"></i><strong>Dry-run mode</strong>
                                                </label>
                                                <small class="d-block text-muted mt-1">Preview what will be converted without creating files</small>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <button class="btn btn-warning text-white w-100" type="button" id="physioBatchConvertBtn" disabled>
                                                <i class="fas fa-wand-magic-sparkles me-2"></i>Convert & Save to Project
                                            </button>
                                        </div>
                                    </div>
                                    <div id="physioBatchError" class="alert alert-danger d-none mt-3"></div>
                                    <div id="physioBatchInfo" class="alert alert-info d-none mt-3"></div>
                                    <div id="physioBatchProgress" class="progress d-none mt-3" style="height: 25px;">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-warning text-dark" style="width: 100%">Converting...</div>
                                    </div>
                                    <!-- Log Window -->
                                    <div id="physioBatchLogContainer" class="d-none mt-3">
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <label class="form-label mb-0"><i class="fas fa-terminal me-2"></i>Conversion Log</label>
                                            <button type="button" class="btn btn-sm btn-outline-secondary" id="physioBatchLogClearBtn">
                                                <i class="fas fa-trash-alt me-1"></i>Clear
                                            </button>
                                        </div>
                                        <div id="physioBatchLog" class="bg-dark text-light p-3 rounded font-monospace" 
                                             style="height: 200px; overflow-y: auto; font-size: 0.85rem; white-space: pre-wrap;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

